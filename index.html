<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Icon Customizer</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fontfaceobserver/2.1.0/fontfaceobserver.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Icon Customizer</h1>
        </header>

        <main class="main-content">
            <!-- Controls Panel -->
            <section class="controls-panel">
                <div class="control-group">
                    <h3>File Upload</h3>
                    <div class="file-upload-area" id="uploadArea">
                        <div class="upload-content">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14,2 14,8 20,8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10,9 9,9 8,9"></polyline>
                            </svg>
                            <p>Drag & drop a screenshot here</p>
                            <p class="upload-subtext">or click to browse</p>
                        </div>
                        <input type="file" id="fileInput" accept="image/*" style="display: none;">
                    </div>
                    <div class="file-info" id="fileInfo" style="display: none;">
                        <p>Loaded: <span id="fileName"></span></p>
                        <button id="clearFile" class="btn-secondary">Clear</button>
                    </div>
                    <div class="control-row">
                        <label for="screenshotUrl">Or load from URL:</label>
                        <div class="url-input-group">
                            <input type="url" id="screenshotUrl" placeholder="https://example.com/image.png">
                            <button id="loadScreenshotUrl" class="btn-secondary">Load</button>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Background</h3>
                    <div class="control-row">
                        <label for="bgColor">Color:</label>
                        <input type="color" id="bgColor" value="#ffffff">
                    </div>
                    <div class="control-row">
                        <label for="cornerRadius">Corner Radius:</label>
                        <input type="range" id="cornerRadius" min="0" max="256" value="20">
                        <span id="cornerRadiusValue">20px</span>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Screenshot</h3>
                    <div class="control-row">
                        <label for="screenshotScale">Zoom:</label>
                        <input type="range" id="screenshotScale" min="0.5" max="3" step="0.1" value="1.0">
                        <span id="screenshotScaleValue">1.0x</span>
                    </div>
                    <div class="control-row">
                        <label for="rotationX">Rotation X:</label>
                        <input type="range" id="rotationX" min="-45" max="45" value="0">
                        <span id="rotationXValue">0°</span>
                    </div>
                    <div class="control-row">
                        <label for="rotationY">Rotation Y:</label>
                        <input type="range" id="rotationY" min="-45" max="45" value="0">
                        <span id="rotationYValue">0°</span>
                    </div>
                    <div class="control-row">
                        <label for="rotationZ">Rotation Z:</label>
                        <input type="range" id="rotationZ" min="-180" max="180" value="0">
                        <span id="rotationZValue">0°</span>
                    </div>
                </div>

                <div class="control-group">
                    <h3>App Icon Watermark</h3>
                    <div class="file-upload-area" id="iconUploadArea">
                        <div class="upload-content">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                <polyline points="21,15 16,10 5,21"></polyline>
                            </svg>
                            <p>Drag & drop app icon here</p>
                            <p class="upload-subtext">or click to browse</p>
                        </div>
                        <input type="file" id="iconInput" accept="image/*" style="display: none;">
                    </div>
                    <div class="file-info" id="iconInfo" style="display: none;">
                        <p>Loaded: <span id="iconName"></span></p>
                        <button id="clearIcon" class="btn-secondary">Clear</button>
                    </div>
                    <div class="control-row">
                        <label for="iconUrl">Or load from URL:</label>
                        <div class="url-input-group">
                            <input type="url" id="iconUrl" placeholder="https://example.com/icon.png">
                            <button id="loadIconUrl" class="btn-secondary">Load</button>
                        </div>
                    </div>
                    <div class="control-row">
                        <label for="iconPosition">Position:</label>
                        <select id="iconPosition">
                            <option value="top-left">Top Left</option>
                            <option value="top-right">Top Right</option>
                            <option value="bottom-left">Bottom Left</option>
                            <option value="bottom-right">Bottom Right</option>
                            <option value="center">Center</option>
                        </select>
                    </div>
                    <div class="control-row">
                        <label for="iconSize">Size:</label>
                        <input type="range" id="iconSize" min="32" max="256" value="64">
                        <span id="iconSizeValue">64px</span>
                    </div>
                    <div class="control-row">
                        <label for="iconRepaintEnabled">
                            <input type="checkbox" id="iconRepaintEnabled">
                            Repaint Icon
                        </label>
                    </div>
                    <div class="control-row">
                        <label for="iconRepaintColor">Repaint Color:</label>
                        <input type="color" id="iconRepaintColor" value="#ffffff">
                    </div>
                </div>

                <div class="control-group">
                    <h3>Gradient Overlay</h3>
                    <div class="control-row">
                        <label for="gradientEnabled">
                            <input type="checkbox" id="gradientEnabled">
                            Enable Gradient
                        </label>
                    </div>
                    <div class="control-row">
                        <label for="gradientStartColor">Start Color:</label>
                        <input type="color" id="gradientStartColor" value="#000000">
                    </div>
                    <div class="control-row">
                        <label for="gradientStartOpacity">Start Opacity:</label>
                        <input type="range" id="gradientStartOpacity" min="0" max="1" step="0.05" value="1.0">
                        <span id="gradientStartOpacityValue">100%</span>
                    </div>
                    <div class="control-row">
                        <label for="gradientStartOffset">Start Offset:</label>
                        <input type="range" id="gradientStartOffset" min="0" max="1" step="0.05" value="0.0">
                        <span id="gradientStartOffsetValue">0%</span>
                    </div>
                    <div class="control-row">
                        <label for="gradientEndColor">End Color:</label>
                        <input type="color" id="gradientEndColor" value="#ffffff">
                    </div>
                    <div class="control-row">
                        <label for="gradientEndOpacity">End Opacity:</label>
                        <input type="range" id="gradientEndOpacity" min="0" max="1" step="0.05" value="0.0">
                        <span id="gradientEndOpacityValue">0%</span>
                    </div>
                    <div class="control-row">
                        <label for="gradientEndOffset">End Offset:</label>
                        <input type="range" id="gradientEndOffset" min="0" max="1" step="0.05" value="1.0">
                        <span id="gradientEndOffsetValue">100%</span>
                    </div>
                    <div class="control-row">
                        <label for="gradientRotation">Rotation:</label>
                        <input type="range" id="gradientRotation" min="0" max="360" step="1" value="0">
                        <span id="gradientRotationValue">0°</span>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Text</h3>
                    <div class="control-row">
                        <label for="textContent">Text (HTML supported):</label>
                        <textarea id="textContent" placeholder="App Name" rows="3">App Name</textarea>
                    </div>
                    <div class="control-row">
                        <label for="textFont">Google Font:</label>
                        <input type="text" id="textFont" placeholder="e.g., Roboto, Open Sans" value="Segoe UI">
                    </div>
                    <div id="fontLoading" class="font-loading" style="display: none;">
                        <span class="loading-spinner"></span>
                        <span>Loading font...</span>
                    </div>
                    <div class="control-row">
                        <label for="textPosition">Position:</label>
                        <select id="textPosition">
                            <option value="center">Center</option>
                            <option value="top-center">Top Center</option>
                            <option value="bottom-center">Bottom Center</option>
                            <option value="top-left">Top Left</option>
                            <option value="top-right">Top Right</option>
                            <option value="bottom-left">Bottom Left</option>
                            <option value="bottom-right">Bottom Right</option>
                        </select>
                    </div>
                    <div class="control-row">
                        <label for="textColor">Base Color:</label>
                        <input type="color" id="textColor" value="#ffffff">
                    </div>
                    <div class="control-row">
                        <label for="textSize">Base Size:</label>
                        <input type="range" id="textSize" min="12" max="96" value="24">
                        <span id="textSizeValue">24px</span>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Icon Size</h3>
                    <div class="control-row">
                        <label for="iconWidth">Width:</label>
                        <input type="number" id="iconWidth" min="64" max="2048" value="512">
                        <span>px</span>
                    </div>
                    <div class="control-row">
                        <label for="iconHeight">Height:</label>
                        <input type="number" id="iconHeight" min="64" max="2048" value="512">
                        <span>px</span>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Export</h3>
                    <button id="exportBtn" class="btn-primary" disabled>Export PNG</button>
                    <div class="export-info">
                        <p id="exportSizeInfo">Output: 512x512 pixels</p>
                        <p>Format: PNG with transparency</p>
                    </div>
                </div>
            </section>

            <!-- Preview Panel -->
            <section class="preview-panel">
                <div class="preview-container">
                    <h3>Preview</h3>
                    <div class="canvas-wrapper">
                        <canvas id="previewCanvas" width="512" height="512"></canvas>
                    </div>
                    <div class="preview-info">
                        <p>Size: 512 × 512 pixels</p>
                        <p class="preview-help">Upload a screenshot to begin customizing</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>